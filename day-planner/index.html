<!DOCTYPE html>
<html lang="en" class="light">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Day Planner</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <style>
    body {
      font-family: 'Inter', sans-serif;
      transition: background-color 0.5s ease, color 0.5s ease;
    }
    .top-background {
      background-image: url('https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=1400&q=80');
      background-size: cover;
      background-position: center;
      height: 220px;
      position: relative;
      border-radius: 0 0 40px 40px;
      overflow: hidden;
    }
    .overlay-light {
      background-color: rgba(0,0,0,0.25);
    }
    .overlay-dark {
      background-color: rgba(0,0,0,0.55);
    }
    .fade-slide {
      opacity: 0;
      transform: translateY(20px);
      transition: opacity 0.8s ease, transform 0.8s ease;
    }
    .fade-slide.show {
      opacity: 1;
      transform: translateY(0);
    }
    /* Flip clock styles */
    .flip-digit {
      display: inline-block;
      background: #222;
      color: #fff;
      padding: 10px;
      border-radius: 8px;
      font-size: 2rem;
      min-width: 40px;
      text-align: center;
      transition: transform 0.3s ease;
    }
    .flip {
      transform: rotateX(360deg);
    }
  </style>
</head>
<body class="bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-gray-100 flex flex-col items-center min-h-screen">

  <!-- Top Section -->
  <div class="top-background w-full flex flex-col justify-center items-center p-4 shadow-lg relative">
    <div id="overlay" class="absolute inset-0 overlay-light transition-colors duration-500"></div>
    <div class="relative z-10 text-center fade-slide" id="dateTimeContainer">
      <div id="currentDate" class="text-3xl md:text-4xl font-semibold mb-2 drop-shadow-lg"></div>
      <div id="clock" class="flex gap-1 justify-center"></div>
    </div>
  </div>

  <!-- Planner -->
  <div class="planner-container bg-white dark:bg-gray-800 rounded-xl shadow-xl p-9 md:p-9 max-w-2xl w-full mx-[60px] -mt-10 relative z-20 mb-8">
    <div class="flex flex-col md:flex-row justify-between items-center mb-6">
      <h1 class="text-3xl md:text-4xl font-bold">Day Planner</h1>
      <div class="flex space-x-4">
        <!-- Disabled Dark Mode Button -->
        <button id="toggleDarkMode" class="p-3 rounded-full bg-blue-500 text-white cursor-not-allowed opacity-50 w-12 h-12 flex items-center justify-center">
          <i class="fas fa-moon"></i>
        </button>
        <button id="resetTasks" class="p-3 rounded-full bg-red-500 text-white hover:bg-red-600 flex items-center justify-center shadow-lg w-12 h-12 transition">
          <i class="fas fa-redo text-lg"></i>
        </button>
      </div>
    </div>
    <div id="timeSlotsContainer" class="space-y-4"></div>
  </div>

  <!-- Reset Modal -->
  <div id="resetModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden opacity-0 transition-opacity">
    <div class="bg-white dark:bg-gray-700 p-8 rounded-lg shadow-xl max-w-sm w-full text-center transform scale-95 transition-transform duration-300">
      <h3 class="text-xl font-semibold mb-4">Clear all tasks?</h3>
      <p class="mb-6">This action cannot be undone.</p>
      <div class="flex justify-around space-x-4">
        <button id="cancelReset" class="py-3 px-6 rounded-lg bg-gray-300 text-gray-800 hover:bg-gray-400 font-medium shadow-md">No</button>
        <button id="confirmReset" class="py-3 px-6 rounded-lg bg-red-600 text-white hover:bg-red-700 font-medium shadow-md">Yes, Clear</button>
      </div>
    </div>
  </div>

  <script>
    const currentDateElem = document.getElementById('currentDate');
    const clockEl = document.getElementById("clock");
    let timeDigits = [];

    // Flip clock helpers
    function createDigit(value) {
      const digit = document.createElement("div");
      digit.className = "flip-digit";
      const span = document.createElement("span");
      span.textContent = value;
      digit.appendChild(span);
      return digit;
    }

    function initClock() {
      const now = new Date();
      currentDateElem.textContent = now.toLocaleDateString('en-US', {
        weekday: 'long', year: 'numeric', month: 'long', day: 'numeric'
      });
      const timeStr = now.toTimeString().slice(0, 8); // HH:MM:SS
      clockEl.innerHTML = "";
      timeDigits = [];

      for (const char of timeStr) {
        if (char === ":") {
          const colon = document.createElement("div");
          colon.textContent = ":";
          colon.className = "text-2xl font-bold";
          clockEl.appendChild(colon);
        } else {
          const digit = createDigit(char);
          timeDigits.push(digit);
          clockEl.appendChild(digit);
        }
      }
    }

    function updateClock() {
      const now = new Date();
      currentDateElem.textContent = now.toLocaleDateString('en-US', {
        weekday: 'long', year: 'numeric', month: 'long', day: 'numeric'
      });
      const timeStr = now.toTimeString().slice(0, 8).replace(/:/g, "");
      timeDigits.forEach((digitEl, i) => {
        const span = digitEl.querySelector("span");
        const newVal = timeStr[i];
        if (span.textContent !== newVal) {
          digitEl.classList.add("flip");
          setTimeout(() => {
            span.textContent = newVal;
            digitEl.classList.remove("flip");
          }, 250);
        }
      });
    }

    // Reset tasks modal
    const resetModal = document.getElementById('resetModal');
    document.getElementById('resetTasks').addEventListener('click', () => {
      resetModal.classList.remove('hidden');
      setTimeout(() => resetModal.classList.remove('opacity-0'), 10);
    });
    document.getElementById('cancelReset').addEventListener('click', () => {
      resetModal.classList.add('opacity-0');
      setTimeout(() => resetModal.classList.add('hidden'), 300);
    });
    document.getElementById('confirmReset').addEventListener('click', () => {
      localStorage.clear();
      location.reload();
    });

    // Init clock and start updates
    initClock();
    setInterval(updateClock, 1000);

    // Fade in date/time
    window.addEventListener('load', () => {
      setTimeout(() => {
        document.getElementById('dateTimeContainer').classList.add('show');
      }, 300);
    });
  </script>
</body>
</html>
